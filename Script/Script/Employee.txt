CREATE TABLE Employee (
Nit varchar(255) NOT NULL,
Name varchar(255) NOT NULL,
Email varchar(255) NOT NULL,
JobTitle varchar(255) NOT NULL,
PRIMARY KEY (Nit));

CREATE PROCEDURE JobTime_Get_Employee
AS
BEGIN
  SELECT * FROM dbo.Employee; 
END

Exec dbo.JobTime_Get_Employee

CREATE PROCEDURE JobTime_Post_Employee
@Nit varchar(255),
@Name varchar(255),
@Email varchar(255),
@JobTitle varchar(255)
AS
BEGIN	
	IF EXISTS(SELECT 1 FROM dbo.Employee WHERE Nit = @Nit)
	BEGIN
	    UPDATE dbo.Employee
		SET Name = @Name,
			Email = @Email,
			JobTitle = @JobTitle
		WHERE Nit = @Nit;
	END
	ELSE
	BEGIN
		INSERT dbo.Employee
		( Nit, Name, Email, JobTitle)
		VALUES
		( @Nit, @Name, @Email, @JobTitle )
	END
END

CREATE PROCEDURE JobTime_Delete_Employee
@Nit varchar(255)
AS
BEGIN
	SET DATEFORMAT DMY;
	SET LANGUAGE SPANISH;
	DECLARE @MsgError NVARCHAR(MAX) = '';	
	BEGIN TRY
	    IF NOT EXISTS(SELECT 1 FROM dbo.Employee WHERE Nit = @Nit)
		BEGIN
			SET @MsgError = 'The employee with Nit: ' + CONVERT(VARCHAR(10), @Nit) + ' does not exist.';
			RAISERROR(@MsgError, 16, 217);
		END
		ELSE
		BEGIN
			DELETE dbo.Employee WHERE Nit = @Nit	    
		END
	END TRY
	BEGIN CATCH
	    SET @MsgError = ERROR_MESSAGE();
		RAISERROR(@MsgError, 16, 217);
	END CATCH
END